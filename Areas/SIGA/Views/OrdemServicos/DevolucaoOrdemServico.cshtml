@{
    ViewBag.Title = "DevolucaoOrdemServico";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var url = Url.Content("~/SIGA/OrdemServicos/ObterOs");
    
}

<div class="col-sm-12">

    <div class="widget-box" ng-controller="OSController">
        <div class="widget-header">
            <h5 class="widget-title bigger lighter">
                <i class="ace-icon fa fa-table"></i>
                Devolução de Ordem de Serviço
            </h5>
        </div>

        <div class="widget-main">
            <div class="row">
                <div class="col-md-6">
                    <input type="text" class="form-control" id="txtIdOS" placeholder="Leia o codigo de barras ou informe codigo" />
                </div>
                <div class="col-md-6">
                    <input type="button" id="btnBuscarOS" value="Buscar OS" ng-click="loadOS()" />
                    <input type="button" id="btnBuscarOSJQ" value="Buscar OS JQ"  />
                </div>
            </div>
            

        </div>
        <div>
            <div>
                <div ng-show="ordemServico != null">
                    Teste Visivel
                    {{ordemServico.IdOrdemServico}}

                </div>

            </div>
        </div>
    </div>
</div>



<script type="text/javascript">

    $(function () {
        $('#btnBuscarOSJQ').click(function () {
            var url = '@url';
            $.ajax({
                url: url,
                type: 'POST',
                datatype: 'json',
                success: function (data) {
                    console.log(data);
                }
                
            });

        })
    });

    var OSController = function ($scope, $http) {

        $scope.loadOS = function () {
            $http({
                method: 'POST',
                url: '@url',
                headers: { 'Content-Type': 'application/json; charset=utf-8' }
            })
            .success(function (data) {
                $scope.ordemServico = data;
                console.log(data);
            }).error(function (data) {
                $scope.ordemServico = null;
                console.log(data);
                alert('Erro ao obter a Ordem de Serviço ' + data);
            });
        };


    }
</script>